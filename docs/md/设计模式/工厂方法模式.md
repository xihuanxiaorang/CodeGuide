---
title: å·¥å‚æ–¹æ³•æ¨¡å¼
tags:
  - è®¾è®¡æ¨¡å¼ 
created: 2022-08-16 16:47:52
modified: 2022-10-17 07:07:11
number headings: auto, first-level 1, max 6, _.1.1.
---

# å·¥å‚æ–¹æ³•æ¨¡å¼

## 1. ğŸ¨æ„å›¾

**å·¥å‚æ–¹æ³•æ¨¡å¼** æ˜¯ä¸€ç§ **åˆ›å»ºå‹è®¾è®¡æ¨¡å¼**ï¼ŒÂ å…¶åœ¨ **çˆ¶ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•**ï¼ŒÂ å…è®¸ **å­ç±»å†³å®šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å‹**ã€‚  
![å·¥å‚æ–¹æ³•æ¨¡å¼](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140004881.png)

## 2. ğŸ™é—®é¢˜

å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€æ¬¾ç‰©æµç®¡ç†åº”ç”¨ã€‚æœ€åˆçš„ç‰ˆæœ¬åªèƒ½å¤„ç†å¡è½¦è¿è¾“ï¼Œå› æ­¤å¤§éƒ¨åˆ†ä»£ç éƒ½åœ¨ä½äº `å¡è½¦` çš„ç±»ä¸­ã€‚  
ä¸€æ®µæ—¶é—´åï¼Œè¿™æ¬¾åº”ç”¨å˜å¾—æå—æ¬¢è¿ã€‚ä½ æ¯å¤©éƒ½èƒ½æ”¶åˆ°åå‡ æ¬¡æ¥è‡ªæµ·è¿å…¬å¸çš„è¯·æ±‚ï¼Œå¸Œæœ›åº”ç”¨èƒ½å¤Ÿæ”¯æŒæµ·ä¸Šç‰©æµåŠŸèƒ½ã€‚  
![åœ¨ç¨‹åºä¸­æ–°å¢ä¸€ä¸ªè¿è¾“ç±»ä¼šé‡åˆ°é—®é¢˜](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140004308.png)

## 3. ğŸ¥³è§£å†³æ–¹æ¡ˆ

å·¥å‚æ–¹æ³•æ¨¡å¼å»ºè®®ä½¿ç”¨ç‰¹æ®Šçš„å·¥å‚æ–¹æ³•ä»£æ›¿å¯¹äºå¯¹è±¡æ„é€ å‡½æ•°çš„ç›´æ¥è°ƒç”¨Â ï¼ˆå³ä½¿ç”¨Â `new` è¿ç®—ç¬¦ï¼‰ã€‚Â ä¸ç”¨æ‹…å¿ƒï¼ŒÂ å¯¹è±¡ä»å°†é€šè¿‡Â `new` è¿ç®—ç¬¦åˆ›å»ºï¼ŒÂ åªæ˜¯è¯¥è¿ç®—ç¬¦æ”¹åœ¨å·¥å‚æ–¹æ³•ä¸­è°ƒç”¨ç½¢äº†ã€‚Â å·¥å‚æ–¹æ³•è¿”å›çš„å¯¹è±¡é€šå¸¸è¢«ç§°ä½œÂ â€œäº§å“â€ã€‚  
![|620](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140003766.png)  
**å­ç±»å¯ä»¥ä¿®æ”¹å·¥å‚æ–¹æ³•è¿”å›çš„å¯¹è±¡ç±»å‹**ã€‚  
ä¹çœ‹ä¹‹ä¸‹ï¼ŒÂ è¿™ç§æ›´æ”¹å¯èƒ½æ¯«æ— æ„ä¹‰ï¼šÂ æˆ‘ä»¬åªæ˜¯æ”¹å˜äº†ç¨‹åºä¸­è°ƒç”¨æ„é€ å‡½æ•°çš„ä½ç½®è€Œå·²ã€‚Â ä½†æ˜¯ï¼ŒÂ ä»”ç»†æƒ³ä¸€ä¸‹ï¼ŒÂ ç°åœ¨ä½ å¯ä»¥ **åœ¨å­ç±»ä¸­é‡å†™å·¥å‚æ–¹æ³•ï¼ŒÂ ä»è€Œæ”¹å˜å…¶åˆ›å»ºäº§å“çš„ç±»å‹**ã€‚  
ä½†æœ‰ä¸€ç‚¹éœ€è¦ **æ³¨æ„**ğŸ’¡: **ä»…å½“è¿™äº›äº§å“å…·æœ‰å…±åŒçš„åŸºç±»æˆ–è€…æ¥å£æ—¶ï¼ŒÂ å­ç±»æ‰èƒ½è¿”å›ä¸åŒç±»å‹çš„äº§å“**ï¼ŒÂ åŒæ—¶ **åŸºç±»ä¸­çš„å·¥å‚æ–¹æ³•è¿˜åº”å°†å…¶è¿”å›ç±»å‹å£°æ˜ä¸ºè¿™ä¸€å…±æœ‰æ¥å£**ã€‚  
![|490](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140003006.png)  
**æ‰€æœ‰äº§å“éƒ½å¿…é¡»å®ç°åŒä¸€ä¸ªæ¥å£**ã€‚  
ä¸¾ä¾‹æ¥è¯´ï¼ŒÂ Â `å¡è½¦ `Truck å’ŒÂ ` è½®èˆ¹ `Ship ç±»éƒ½å¿…é¡»å®ç°Â ` è¿è¾“ `Transport æ¥å£ï¼ŒÂ è¯¥æ¥å£å£°æ˜äº†ä¸€ä¸ªåä¸ºÂ `deliver` äº¤ä»˜çš„æ–¹æ³•ã€‚Â æ¯ä¸ªç±»éƒ½å°†ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¯¥æ–¹æ³•ï¼šÂ å¡è½¦èµ°é™†è·¯äº¤ä»˜è´§ç‰©ï¼ŒÂ è½®èˆ¹èµ°æµ·è·¯äº¤ä»˜è´§ç‰©ã€‚Â Â `é™†è·¯è¿è¾“ `RoadLogistics ç±»ä¸­çš„å·¥å‚æ–¹æ³•è¿”å›å¡è½¦å¯¹è±¡ï¼ŒÂ è€ŒÂ ` æµ·è·¯è¿è¾“ `SeaLogistics ç±»åˆ™è¿”å›è½®èˆ¹å¯¹è±¡ã€‚  
![|640](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140003087.png)  
åªè¦äº§å“å®ç°ä¸€ä¸ªå…±åŒçš„æ¥å£ï¼Œä½ å°±å¯ä»¥å°†å…¶å¯¹è±¡ä¼ é€’ç»™å®¢æˆ·ç«¯ä»£ç ï¼Œè€Œæ— éœ€æä¾›é¢å¤–æ•°æ®ã€‚  
è°ƒç”¨å·¥å‚æ–¹æ³•çš„ä»£ç Â ï¼ˆé€šå¸¸è¢«ç§°ä¸ºå®¢æˆ·ç«¯ä»£ç ï¼‰Â æ— éœ€äº†è§£ä¸åŒå­ç±»è¿”å›å®é™…å¯¹è±¡ä¹‹é—´çš„å·®åˆ«ã€‚Â å®¢æˆ·ç«¯å°†æ‰€æœ‰äº§å“è§†ä¸ºæŠ½è±¡çš„Â ` è¿è¾“ `Â ã€‚Â å®¢æˆ·ç«¯çŸ¥é“æ‰€æœ‰è¿è¾“å¯¹è±¡éƒ½æä¾›Â ` äº¤ä»˜ ` æ–¹æ³•ï¼ŒÂ ä½†æ˜¯å¹¶ä¸å…³å¿ƒå…¶å…·ä½“å®ç°æ–¹å¼ã€‚

## 4. ğŸ¯ç»“æ„

![|1000](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140004006.png)

1. **äº§å“**ï¼ˆProductï¼‰å°†ä¼š **å¯¹æ¥å£è¿›è¡Œå£°æ˜**ã€‚å¯¹äºæ‰€æœ‰ç”±åˆ›å»ºè€…åŠå…¶å­ç±»æ„å»ºçš„å¯¹è±¡ï¼Œè¿™äº›æ¥å£éƒ½æ˜¯é€šç”¨çš„ã€‚
2. **å…·ä½“äº§å“**ï¼ˆConcrete Prodcutsï¼‰æ˜¯ **äº§å“æ¥å£çš„ä¸åŒå®ç°**ã€‚
3. **åˆ›å»ºè€…**ï¼ˆCreatorï¼‰ç±» **å£°æ˜è¿”å›äº§å“å¯¹è±¡çš„å·¥å‚æ–¹æ³•**ã€‚è¯¥ **æ–¹æ³•çš„è¿”å›å¯¹è±¡ç±»å‹å¿…é¡»ä¸äº§å“æ¥å£ç›¸åŒ¹é…**ã€‚å¯ä»¥ **å°†å·¥å‚æ–¹æ³•å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•**ï¼Œå¼ºåˆ¶è¦æ±‚æ¯ä¸ªå­ç±»ä»¥ä¸åŒæ–¹å¼å®ç°è¯¥æ–¹æ³•ã€‚æˆ–è€…ï¼Œä¹Ÿ **å¯ä»¥åœ¨åŸºç¡€å·¥å‚æ–¹æ³•ä¸­è¿”å›é»˜è®¤äº§å“ç±»** å‹ã€‚
4. **å…·ä½“åˆ›å»ºè€…**ï¼ˆConcrete Creatorsï¼‰å°†ä¼š **é‡å†™åŸºç¡€å·¥å‚æ–¹æ³•ï¼Œä½¿å…¶è¿”å›ä¸åŒç±»å‹çš„äº§å“**ã€‚**æ³¨æ„**ğŸ’¡ï¼Œå¹¶ä¸ä¸€å®šæ¯æ¬¡è°ƒç”¨å·¥å‚æ–¹æ³•éƒ½ä¼š **åˆ›å»º** æ–°çš„å®ä¾‹ã€‚å·¥å‚æ–¹æ³•ä¹Ÿå¯ä»¥è¿”å›ç¼“å­˜ã€å¯¹è±¡æ± æˆ–å…¶ä»–æ¥æºçš„å·²æœ‰å¯¹è±¡ã€‚

## 5. ğŸš€ç‰©æµè¿è¾“

### 5.1. å·¥ç¨‹ç»“æ„

é¦–å…ˆæ‰“å¼€ Terminal -> è·³è½¬åˆ°å½“å‰é¡¹ç›®æ¨¡å— -> è¾“å…¥ `tree /f` å‘½ä»¤æŸ¥çœ‹å·¥ç¨‹ç»“æ„ã€‚

```
â”œâ”€â”€â”€src
â”‚   â”œâ”€â”€â”€main
â”‚   â”‚   â”œâ”€â”€â”€java
â”‚   â”‚   â”‚   â””â”€â”€â”€top
â”‚   â”‚   â”‚       â””â”€â”€â”€xiaorang
â”‚   â”‚   â”‚           â””â”€â”€â”€design
â”‚   â”‚   â”‚               â””â”€â”€â”€pattern
â”‚   â”‚   â”‚                   â””â”€â”€â”€factorymethod
â”‚   â”‚   â”‚                       â”‚   Ship.java
â”‚   â”‚   â”‚                       â”‚   Transport.java
â”‚   â”‚   â”‚                       â”‚   Truck.java
â”‚   â”‚   â”‚                       â”‚   
â”‚   â”‚   â”‚                       â””â”€â”€â”€factory
â”‚   â”‚   â”‚                               Logistics.java
â”‚   â”‚   â”‚                               RoadLogistics.java
â”‚   â”‚   â”‚                               SeaLogistics.java
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€resources
â”‚   â”‚           log4j.properties
â”‚   â”‚
â”‚   â””â”€â”€â”€test
â”‚       â””â”€â”€â”€java
â”‚           â””â”€â”€â”€top
â”‚               â””â”€â”€â”€xiaorang
â”‚                   â””â”€â”€â”€design
â”‚                       â””â”€â”€â”€pattern
â”‚                           â””â”€â”€â”€factorymethod
â”‚                               â””â”€â”€â”€factory
â”‚                                       LogisticsTest.java
```

### 5.2. ä»£ç å®ç°

#### 5.2.1. å®šä¹‰è¿è¾“æ‰‹æ®µæ¥å£

```java
public interface Transport {  
    /**  
     * äº¤ä»˜è´§ç‰©  
     */  
    void delivery();  
}
```

#### 5.2.2. å®ç°è¿è¾“æ‰‹æ®µæ¥å£

##### 5.2.2.1. å¡è½¦

```java
@Slf4j  
public class Truck implements Transport {  
    @Override  
    public void delivery() {  
        log.info("å¡è½¦èµ°é™†è·¯äº¤ä»˜è´§ç‰©");  
    }  
}
```

##### 5.2.2.2. è½®èˆ¹

```java
@Slf4j  
public class Ship implements Transport {  
    @Override  
    public void delivery() {  
        log.info("è½®èˆ¹èµ°æµ·è·¯äº¤ä»˜è´§ç‰©");  
    }  
}
```

#### 5.2.3. åå‹¤ä¸­å¿ƒ (æŠ½è±¡å·¥å‚)

```java
public abstract class Logistics {  
    /**  
     * ä½¿ç”¨ä½•ç§æ–¹å¼è¿è¾“  
     *  
     * @return è¿è¾“æ‰‹æ®µ  
     */  
    protected abstract Transport createTransport();  
  
    /**  
     * è®¡åˆ’äº¤ä»˜è´§ç‰©  
     */  
    public void planDelivery() {  
        Transport transport = createTransport();  
        transport.delivery();  
    }  
}
```

#### 5.2.4. åå‹¤ä¸­å¿ƒå®ç°

##### 5.2.4.1. æµ·ä¸Šè¿è¾“

```java
public class SeaLogistics extends Logistics {  
    @Override  
    public Transport createTransport() {  
        return new Ship();  
    }  
}
```

##### 5.2.4.2. é™†è·¯è¿è¾“

```java
public class RoadLogistics extends Logistics {  
    @Override  
    public Transport createTransport() {  
        return new Truck();  
    }  
}
```

### 5.3. æµ‹è¯•éªŒè¯

æµ‹è¯•ç±»ï¼š

```java
public class LogisticsTest {  
    @Test  
    public void test() {  
        // é™†è·¯è¿è¾“  
        Logistics roadLogistics = new RoadLogistics();  
        roadLogistics.planDelivery();  
  
        // æµ·ä¸Šè¿è¾“  
        Logistics seaLogistics = new SeaLogistics();  
        seaLogistics.planDelivery();  
    }  
}
```

ç»“æœï¼š

```
2022-08-17 15:28:49 INFO  Truck:16 - å¡è½¦èµ°é™†è·¯äº¤ä»˜è´§ç‰©
2022-08-17 15:28:49 INFO  Ship:16 - è½®èˆ¹èµ°æµ·è·¯äº¤ä»˜è´§ç‰©
```

## 6. âš–ï¸ä¼˜ç¼ºç‚¹

- âœ”ï¸ ä½ å¯ä»¥é¿å…åˆ›å»ºè€…å’Œå…·ä½“äº§å“ä¹‹é—´çš„ç´§å¯†è€¦åˆã€‚  
- âœ”ï¸ **å•ä¸€èŒè´£åŸåˆ™**ã€‚ä½ å¯ä»¥å°†äº§å“åˆ›å»ºä»£ç æ”¾åœ¨ç¨‹åºçš„å•ä¸€ä½ç½®ï¼Œä»è€Œä½¿å¾—ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚  
- âœ”ï¸ **å¼€é—­åŸåˆ™**ã€‚æ— éœ€æ›´æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç ï¼Œä½ å°±å¯ä»¥åœ¨ç¨‹åºä¸­å¼•å…¥æ–°çš„äº§å“ç±»å‹ã€‚  
- âŒ åº”ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼éœ€è¦å¼•å…¥è®¸å¤šæ–°çš„å­ç±»ï¼Œä»£ç å¯èƒ½ä¼šå› æ­¤å˜å¾—æ›´å¤æ‚ã€‚æœ€å¥½çš„æƒ…å†µæ˜¯å°†è¯¥æ¨¡å¼å¼•å…¥åˆ›å»ºè€…ç±»çš„ç°æœ‰å±‚æ¬¡ç»“æ„ä¸­ã€‚  

## 7. ğŸ†æºç ä¸­çš„è®¾è®¡æ¨¡å¼

### 7.1. ILoggerFactory

![ILoggerFactory](https://fastly.jsdelivr.net/gh/xihuanxiaorang/images/202211140004411.svg)
